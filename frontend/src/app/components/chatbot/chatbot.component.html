<!-- Floating Chat Button -->
<div class="chatbot-button" (click)="toggleChat()">ðŸ’¬</div>

<!-- Chat Window -->
<div class="chatbot-window" *ngIf="isOpen">
  <div class="chatbot-header">
    <span>Financial Advisor powered by AI</span>
    <button (click)="toggleChat()">âœ–</button>
  </div>

  <div class="chatbot-messages">
    <div *ngFor="let msg of messages" class="chat-message">
      <b>{{ msg.from }}:</b>
      <div *ngIf="msg.html; else plainText" [innerHTML]="msg.html"></div>
      <ng-template #plainText>{{ msg.text }}</ng-template>
    </div>

    <div *ngIf="loading" class="chat-message loading">
      <b>AI:</b> <span class="spinner"></span> Thinking...
    </div>
  </div>

  <div class="chatbot-input">
    <input
      [(ngModel)]="newMessage"
      (keydown.enter)="sendMessage()"
      placeholder="Type your message..."
    />
    <button (click)="sendMessage()">Send</button>
  </div>
</div>
